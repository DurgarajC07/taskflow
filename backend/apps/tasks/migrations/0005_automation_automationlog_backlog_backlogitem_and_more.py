# Generated by Django 5.2.10 on 2026-01-25 07:38

import apps.core.utils.validators
import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('organizations', '0001_initial'),
        ('tasks', '0004_workflow_workflowrule_workflowstate_and_more'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Automation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(help_text='Automation rule name', max_length=255)),
                ('description', models.TextField(blank=True, help_text='Automation description')),
                ('trigger_type', models.CharField(choices=[('task_created', 'Task Created'), ('task_updated', 'Task Updated'), ('status_changed', 'Status Changed'), ('assignee_changed', 'Assignee Changed'), ('due_date_changed', 'Due Date Changed'), ('priority_changed', 'Priority Changed'), ('comment_added', 'Comment Added'), ('attachment_added', 'Attachment Added'), ('time_logged', 'Time Logged'), ('scheduled', 'Scheduled Trigger')], help_text='What triggers this automation', max_length=30)),
                ('trigger_config', models.JSONField(blank=True, default=dict, help_text='Trigger-specific configuration')),
                ('conditions', models.JSONField(blank=True, default=list, help_text='Conditions that must be met (if-then logic)')),
                ('actions', models.JSONField(blank=True, default=list, help_text='Actions to perform when triggered')),
                ('is_active', models.BooleanField(default=True, help_text='Whether automation is active')),
                ('priority', models.IntegerField(default=0, help_text='Execution priority (higher = earlier)')),
                ('execution_count', models.IntegerField(default=0, help_text='Number of times automation has executed')),
                ('last_executed_at', models.DateTimeField(blank=True, help_text='Last execution timestamp', null=True)),
                ('created_by', models.ForeignKey(help_text='User who created the automation', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_automations', to=settings.AUTH_USER_MODEL)),
                ('project', models.ForeignKey(help_text='Related project', on_delete=django.db.models.deletion.CASCADE, related_name='automations', to='tasks.project')),
            ],
            options={
                'verbose_name': 'Automation',
                'verbose_name_plural': 'Automations',
                'db_table': 'automations',
                'ordering': ['-priority', 'name'],
            },
        ),
        migrations.CreateModel(
            name='AutomationLog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('status', models.CharField(choices=[('success', 'Success'), ('failed', 'Failed'), ('partial', 'Partially Successful')], help_text='Execution status', max_length=20)),
                ('execution_time', models.IntegerField(help_text='Execution time in milliseconds')),
                ('trigger_data', models.JSONField(default=dict, help_text='Data that triggered the automation')),
                ('actions_performed', models.JSONField(default=list, help_text='List of actions that were performed')),
                ('error_message', models.TextField(blank=True, help_text='Error message if execution failed')),
                ('automation', models.ForeignKey(help_text='Related automation', on_delete=django.db.models.deletion.CASCADE, related_name='execution_logs', to='tasks.automation')),
                ('task', models.ForeignKey(blank=True, help_text='Related task (if applicable)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='automation_logs', to='tasks.task')),
            ],
            options={
                'verbose_name': 'Automation Log',
                'verbose_name_plural': 'Automation Logs',
                'db_table': 'automation_logs',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Backlog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(help_text='Backlog name', max_length=255)),
                ('backlog_type', models.CharField(choices=[('product', 'Product Backlog'), ('sprint', 'Sprint Backlog')], default='product', help_text='Type of backlog', max_length=20)),
                ('description', models.TextField(blank=True, help_text='Backlog description')),
                ('owner', models.ForeignKey(blank=True, help_text='Backlog owner', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='owned_backlogs', to=settings.AUTH_USER_MODEL)),
                ('project', models.ForeignKey(help_text='Related project', on_delete=django.db.models.deletion.CASCADE, related_name='backlogs', to='tasks.project')),
            ],
            options={
                'verbose_name': 'Backlog',
                'verbose_name_plural': 'Backlogs',
                'db_table': 'backlogs',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='BacklogItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('priority', models.IntegerField(choices=[(1, 'Highest'), (2, 'High'), (3, 'Medium'), (4, 'Low'), (5, 'Lowest')], default=3, help_text='Item priority')),
                ('order', models.IntegerField(default=0, help_text='Display order in backlog')),
                ('story_points', models.IntegerField(blank=True, help_text='Estimated story points', null=True)),
                ('business_value', models.IntegerField(blank=True, help_text='Business value score', null=True)),
                ('added_by', models.ForeignKey(help_text='User who added item', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='backlog_item_additions', to=settings.AUTH_USER_MODEL)),
                ('backlog', models.ForeignKey(help_text='Related backlog', on_delete=django.db.models.deletion.CASCADE, related_name='items', to='tasks.backlog')),
                ('task', models.ForeignKey(help_text='Related task', on_delete=django.db.models.deletion.CASCADE, related_name='backlog_items', to='tasks.task')),
            ],
            options={
                'verbose_name': 'Backlog Item',
                'verbose_name_plural': 'Backlog Items',
                'db_table': 'backlog_items',
                'ordering': ['priority', 'order'],
            },
        ),
        migrations.CreateModel(
            name='CustomView',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(help_text='View name', max_length=255)),
                ('description', models.TextField(blank=True, help_text='View description')),
                ('view_type', models.CharField(choices=[('list', 'List View'), ('board', 'Board View'), ('timeline', 'Timeline View'), ('calendar', 'Calendar View'), ('gantt', 'Gantt View'), ('table', 'Table View')], default='list', help_text='Type of view', max_length=20)),
                ('view_config', models.JSONField(default=dict, help_text='View configuration (columns, filters, grouping, etc.)')),
                ('is_default', models.BooleanField(default=False, help_text='Whether this is the default view')),
                ('is_shared', models.BooleanField(default=False, help_text='Whether view is shared with team')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_set', to='organizations.organization')),
                ('project', models.ForeignKey(blank=True, help_text='Optional project view scope', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='custom_views', to='tasks.project')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(help_text='View owner', on_delete=django.db.models.deletion.CASCADE, related_name='custom_views', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Custom View',
                'verbose_name_plural': 'Custom Views',
                'db_table': 'custom_views',
                'ordering': ['-is_default', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Label',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(help_text='Label name', max_length=100)),
                ('color', models.CharField(default='#3B82F6', help_text='Label color (hex)', max_length=7, validators=[apps.core.utils.validators.validate_hex_color])),
                ('description', models.TextField(blank=True, help_text='Label description')),
                ('usage_count', models.IntegerField(default=0, help_text='Number of times label is used')),
                ('created_by', models.ForeignKey(help_text='User who created the label', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_labels', to=settings.AUTH_USER_MODEL)),
                ('project', models.ForeignKey(help_text='Related project', on_delete=django.db.models.deletion.CASCADE, related_name='labels', to='tasks.project')),
            ],
            options={
                'verbose_name': 'Label',
                'verbose_name_plural': 'Labels',
                'db_table': 'labels',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Mention',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('content_type', models.CharField(choices=[('task', 'Task'), ('comment', 'Comment')], help_text='Type of content containing mention', max_length=20)),
                ('is_read', models.BooleanField(default=False, help_text='Whether mention has been seen')),
                ('read_at', models.DateTimeField(blank=True, help_text='When mention was marked as read', null=True)),
                ('comment', models.ForeignKey(blank=True, help_text='Related comment (if mentioned in comment)', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='mentions', to='tasks.taskcomment')),
                ('mentioned_by', models.ForeignKey(help_text='User who created the mention', on_delete=django.db.models.deletion.CASCADE, related_name='mentions_created', to=settings.AUTH_USER_MODEL)),
                ('mentioned_user', models.ForeignKey(help_text='User who was mentioned', on_delete=django.db.models.deletion.CASCADE, related_name='mentions_received', to=settings.AUTH_USER_MODEL)),
                ('task', models.ForeignKey(help_text='Related task', on_delete=django.db.models.deletion.CASCADE, related_name='mentions', to='tasks.task')),
            ],
            options={
                'verbose_name': 'Mention',
                'verbose_name_plural': 'Mentions',
                'db_table': 'mentions',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='SavedFilter',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(help_text='Filter name', max_length=255)),
                ('description', models.TextField(blank=True, help_text='Filter description')),
                ('filter_config', models.JSONField(default=dict, help_text='Filter configuration (criteria, sorting, grouping)')),
                ('visibility', models.CharField(choices=[('private', 'Private'), ('shared', 'Shared with Team'), ('public', 'Public')], default='private', help_text='Filter visibility', max_length=20)),
                ('is_favorite', models.BooleanField(default=False, help_text='Whether filter is favorited')),
                ('usage_count', models.IntegerField(default=0, help_text='Number of times filter has been used')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_set', to='organizations.organization')),
                ('project', models.ForeignKey(blank=True, help_text='Optional project filter scope', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='saved_filters', to='tasks.project')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(help_text='Filter owner', on_delete=django.db.models.deletion.CASCADE, related_name='saved_filters', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Saved Filter',
                'verbose_name_plural': 'Saved Filters',
                'db_table': 'saved_filters',
                'ordering': ['-is_favorite', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Sprint',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(help_text='Sprint name', max_length=255)),
                ('sprint_number', models.IntegerField(help_text='Sprint sequence number')),
                ('goal', models.TextField(blank=True, help_text='Sprint goal/objective')),
                ('description', models.TextField(blank=True, help_text='Sprint description')),
                ('start_date', models.DateField(help_text='Sprint start date')),
                ('end_date', models.DateField(help_text='Sprint end date')),
                ('status', models.CharField(choices=[('planned', 'Planned'), ('active', 'Active'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='planned', help_text='Sprint status', max_length=20)),
                ('capacity', models.IntegerField(blank=True, help_text='Team capacity (story points)', null=True)),
                ('story_points_completed', models.IntegerField(default=0, help_text='Completed story points')),
                ('completed_tasks_count', models.IntegerField(default=0, help_text='Number of completed tasks')),
                ('total_tasks_count', models.IntegerField(default=0, help_text='Total number of tasks')),
                ('created_by', models.ForeignKey(help_text='User who created the sprint', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_sprints', to=settings.AUTH_USER_MODEL)),
                ('project', models.ForeignKey(help_text='Related project', on_delete=django.db.models.deletion.CASCADE, related_name='sprints', to='tasks.project')),
            ],
            options={
                'verbose_name': 'Sprint',
                'verbose_name_plural': 'Sprints',
                'db_table': 'sprints',
                'ordering': ['-sprint_number'],
            },
        ),
        migrations.CreateModel(
            name='SprintTask',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('story_points', models.IntegerField(blank=True, help_text='Story points for this task', null=True)),
                ('order', models.IntegerField(default=0, help_text='Display order within sprint')),
                ('added_by', models.ForeignKey(help_text='User who added task to sprint', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sprint_task_additions', to=settings.AUTH_USER_MODEL)),
                ('sprint', models.ForeignKey(help_text='Related sprint', on_delete=django.db.models.deletion.CASCADE, related_name='sprint_tasks', to='tasks.sprint')),
                ('task', models.ForeignKey(help_text='Related task', on_delete=django.db.models.deletion.CASCADE, related_name='sprint_assignments', to='tasks.task')),
            ],
            options={
                'verbose_name': 'Sprint Task',
                'verbose_name_plural': 'Sprint Tasks',
                'db_table': 'sprint_tasks',
                'ordering': ['order', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Tag',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(help_text='Tag name', max_length=100)),
                ('color', models.CharField(default='#8B5CF6', help_text='Tag color (hex)', max_length=7, validators=[apps.core.utils.validators.validate_hex_color])),
                ('description', models.TextField(blank=True, help_text='Tag description')),
                ('usage_count', models.IntegerField(default=0, help_text='Number of times tag is used')),
                ('created_by', models.ForeignKey(help_text='User who created the tag', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_tags', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_set', to='organizations.organization')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Tag',
                'verbose_name_plural': 'Tags',
                'db_table': 'tags',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='TaskReaction',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('reaction_type', models.CharField(choices=[('üëç', 'Thumbs Up'), ('üëé', 'Thumbs Down'), ('‚ù§Ô∏è', 'Heart'), ('üî•', 'Fire'), ('üéâ', 'Party'), ('üöÄ', 'Rocket'), ('üëÄ', 'Eyes'), ('ü§î', 'Thinking'), ('‚úÖ', 'Check'), ('‚ùì', 'Question')], help_text='Reaction emoji type', max_length=10)),
                ('comment', models.ForeignKey(blank=True, help_text='Related comment', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='reactions', to='tasks.taskcomment')),
                ('task', models.ForeignKey(blank=True, help_text='Related task', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='reactions', to='tasks.task')),
                ('user', models.ForeignKey(help_text='User who reacted', on_delete=django.db.models.deletion.CASCADE, related_name='task_reactions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Task Reaction',
                'verbose_name_plural': 'Task Reactions',
                'db_table': 'task_reactions',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='TimeEntry',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('description', models.TextField(blank=True, help_text='Description of work performed')),
                ('hours', models.DecimalField(decimal_places=2, help_text='Hours worked', max_digits=6)),
                ('date', models.DateField(help_text='Date of work')),
                ('start_time', models.TimeField(blank=True, help_text='Start time of work', null=True)),
                ('end_time', models.TimeField(blank=True, help_text='End time of work', null=True)),
                ('is_billable', models.BooleanField(default=True, help_text='Whether time is billable')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_set', to='organizations.organization')),
                ('task', models.ForeignKey(help_text='Related task', on_delete=django.db.models.deletion.CASCADE, related_name='time_entries', to='tasks.task')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(help_text='User who logged time', on_delete=django.db.models.deletion.CASCADE, related_name='time_entries', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Time Entry',
                'verbose_name_plural': 'Time Entries',
                'db_table': 'time_entries',
                'ordering': ['-date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Webhook',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(help_text='Webhook name', max_length=255)),
                ('url', models.URLField(help_text='Webhook endpoint URL', max_length=500)),
                ('secret', models.CharField(blank=True, help_text='Secret token for request signing', max_length=255)),
                ('description', models.TextField(blank=True, help_text='Webhook description')),
                ('events', models.JSONField(default=list, help_text='Subscribed event types')),
                ('is_active', models.BooleanField(default=True, help_text='Whether webhook is active')),
                ('retry_on_failure', models.BooleanField(default=True, help_text='Whether to retry failed deliveries')),
                ('max_retries', models.IntegerField(default=3, help_text='Maximum number of retry attempts')),
                ('delivery_count', models.IntegerField(default=0, help_text='Total number of deliveries attempted')),
                ('failure_count', models.IntegerField(default=0, help_text='Number of failed deliveries')),
                ('last_triggered_at', models.DateTimeField(blank=True, help_text='Last trigger timestamp', null=True)),
                ('created_by', models.ForeignKey(help_text='User who created the webhook', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_webhooks', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_set', to='organizations.organization')),
                ('project', models.ForeignKey(blank=True, help_text='Optional project scope (null = organization-wide)', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='webhooks', to='tasks.project')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Webhook',
                'verbose_name_plural': 'Webhooks',
                'db_table': 'webhooks',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='WebhookDelivery',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('event_type', models.CharField(help_text='Event that triggered the webhook', max_length=50)),
                ('payload', models.JSONField(help_text='Request payload')),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('sending', 'Sending'), ('success', 'Success'), ('failed', 'Failed'), ('retrying', 'Retrying')], default='pending', help_text='Delivery status', max_length=20)),
                ('response_status_code', models.IntegerField(blank=True, help_text='HTTP response status code', null=True)),
                ('response_body', models.TextField(blank=True, help_text='HTTP response body')),
                ('response_headers', models.JSONField(blank=True, default=dict, help_text='HTTP response headers')),
                ('sent_at', models.DateTimeField(blank=True, help_text='When delivery was attempted', null=True)),
                ('response_time', models.IntegerField(blank=True, help_text='Response time in milliseconds', null=True)),
                ('retry_count', models.IntegerField(default=0, help_text='Number of retry attempts')),
                ('next_retry_at', models.DateTimeField(blank=True, help_text='Next retry scheduled time', null=True)),
                ('error_message', models.TextField(blank=True, help_text='Error message if delivery failed')),
                ('webhook', models.ForeignKey(help_text='Related webhook', on_delete=django.db.models.deletion.CASCADE, related_name='deliveries', to='tasks.webhook')),
            ],
            options={
                'verbose_name': 'Webhook Delivery',
                'verbose_name_plural': 'Webhook Deliveries',
                'db_table': 'webhook_deliveries',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='WorkLog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('log_type', models.CharField(choices=[('created', 'Created'), ('updated', 'Updated'), ('assigned', 'Assigned'), ('status_changed', 'Status Changed'), ('commented', 'Commented'), ('attached', 'Attachment Added'), ('time_logged', 'Time Logged'), ('linked', 'Linked')], help_text='Type of activity', max_length=20)),
                ('description', models.TextField(help_text='Description of the activity')),
                ('metadata', models.JSONField(blank=True, default=dict, help_text='Additional activity metadata')),
                ('task', models.ForeignKey(help_text='Related task', on_delete=django.db.models.deletion.CASCADE, related_name='work_logs', to='tasks.task')),
                ('user', models.ForeignKey(help_text='User who performed the action', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='work_logs', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Work Log',
                'verbose_name_plural': 'Work Logs',
                'db_table': 'work_logs',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ApiKey',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_deleted', models.BooleanField(db_index=True, default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(help_text='API key name/description', max_length=255)),
                ('key_hash', models.CharField(help_text='Hashed API key', max_length=255, unique=True)),
                ('key_prefix', models.CharField(help_text='Key prefix for identification', max_length=10)),
                ('permissions', models.JSONField(default=list, help_text='API permission scopes')),
                ('is_readonly', models.BooleanField(default=False, help_text='Whether key has read-only access')),
                ('allowed_ips', models.JSONField(blank=True, default=list, help_text='Allowed IP addresses (empty = all)')),
                ('expires_at', models.DateTimeField(blank=True, help_text='Key expiration date', null=True)),
                ('is_active', models.BooleanField(default=True, help_text='Whether key is active')),
                ('last_used_at', models.DateTimeField(blank=True, help_text='Last usage timestamp', null=True)),
                ('usage_count', models.IntegerField(default=0, help_text='Number of times key has been used')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_deleted', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_set', to='organizations.organization')),
                ('updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(help_text='API key owner', on_delete=django.db.models.deletion.CASCADE, related_name='api_keys', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'API Key',
                'verbose_name_plural': 'API Keys',
                'db_table': 'api_keys',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['organization', 'user'], name='api_keys_organiz_b45f03_idx'), models.Index(fields=['key_prefix'], name='api_keys_key_pre_9c2634_idx'), models.Index(fields=['is_active'], name='api_keys_is_acti_73be43_idx'), models.Index(fields=['expires_at'], name='api_keys_expires_f68b1a_idx')],
            },
        ),
        migrations.AddIndex(
            model_name='automation',
            index=models.Index(fields=['project', 'is_active'], name='automations_project_f42710_idx'),
        ),
        migrations.AddIndex(
            model_name='automation',
            index=models.Index(fields=['trigger_type'], name='automations_trigger_58146f_idx'),
        ),
        migrations.AddIndex(
            model_name='automation',
            index=models.Index(fields=['-priority'], name='automations_priorit_726332_idx'),
        ),
        migrations.AddIndex(
            model_name='automationlog',
            index=models.Index(fields=['automation', '-created_at'], name='automation__automat_1669c5_idx'),
        ),
        migrations.AddIndex(
            model_name='automationlog',
            index=models.Index(fields=['status'], name='automation__status_bce883_idx'),
        ),
        migrations.AddIndex(
            model_name='automationlog',
            index=models.Index(fields=['task'], name='automation__task_id_deb730_idx'),
        ),
        migrations.AddIndex(
            model_name='backlog',
            index=models.Index(fields=['project', 'backlog_type'], name='backlogs_project_318897_idx'),
        ),
        migrations.AddIndex(
            model_name='backlogitem',
            index=models.Index(fields=['backlog', 'priority', 'order'], name='backlog_ite_backlog_6be9e5_idx'),
        ),
        migrations.AddIndex(
            model_name='backlogitem',
            index=models.Index(fields=['task'], name='backlog_ite_task_id_927746_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='backlogitem',
            unique_together={('backlog', 'task')},
        ),
        migrations.AddIndex(
            model_name='customview',
            index=models.Index(fields=['organization', 'user'], name='custom_view_organiz_1a037a_idx'),
        ),
        migrations.AddIndex(
            model_name='customview',
            index=models.Index(fields=['view_type'], name='custom_view_view_ty_8d22ba_idx'),
        ),
        migrations.AddIndex(
            model_name='customview',
            index=models.Index(fields=['-is_default'], name='custom_view_is_defa_5db70c_idx'),
        ),
        migrations.AddIndex(
            model_name='label',
            index=models.Index(fields=['project'], name='labels_project_f82d2a_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='label',
            unique_together={('project', 'name')},
        ),
        migrations.AddIndex(
            model_name='mention',
            index=models.Index(fields=['mentioned_user', 'is_read'], name='mentions_mention_2bc25c_idx'),
        ),
        migrations.AddIndex(
            model_name='mention',
            index=models.Index(fields=['task'], name='mentions_task_id_b80198_idx'),
        ),
        migrations.AddIndex(
            model_name='mention',
            index=models.Index(fields=['content_type'], name='mentions_content_6af404_idx'),
        ),
        migrations.AddIndex(
            model_name='savedfilter',
            index=models.Index(fields=['organization', 'user'], name='saved_filte_organiz_118db7_idx'),
        ),
        migrations.AddIndex(
            model_name='savedfilter',
            index=models.Index(fields=['visibility'], name='saved_filte_visibil_cfbfe0_idx'),
        ),
        migrations.AddIndex(
            model_name='savedfilter',
            index=models.Index(fields=['-is_favorite'], name='saved_filte_is_favo_0fc650_idx'),
        ),
        migrations.AddIndex(
            model_name='sprint',
            index=models.Index(fields=['project', 'status'], name='sprints_project_d1ab01_idx'),
        ),
        migrations.AddIndex(
            model_name='sprint',
            index=models.Index(fields=['start_date', 'end_date'], name='sprints_start_d_264577_idx'),
        ),
        migrations.AddIndex(
            model_name='sprint',
            index=models.Index(fields=['-sprint_number'], name='sprints_sprint__71eb9b_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='sprint',
            unique_together={('project', 'sprint_number')},
        ),
        migrations.AddIndex(
            model_name='sprinttask',
            index=models.Index(fields=['sprint', 'order'], name='sprint_task_sprint__0279af_idx'),
        ),
        migrations.AddIndex(
            model_name='sprinttask',
            index=models.Index(fields=['task'], name='sprint_task_task_id_850289_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='sprinttask',
            unique_together={('sprint', 'task')},
        ),
        migrations.AddIndex(
            model_name='tag',
            index=models.Index(fields=['organization'], name='tags_organiz_38f7d5_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='tag',
            unique_together={('organization', 'name')},
        ),
        migrations.AddIndex(
            model_name='taskreaction',
            index=models.Index(fields=['task', 'reaction_type'], name='task_reacti_task_id_756b2a_idx'),
        ),
        migrations.AddIndex(
            model_name='taskreaction',
            index=models.Index(fields=['comment', 'reaction_type'], name='task_reacti_comment_858787_idx'),
        ),
        migrations.AddIndex(
            model_name='taskreaction',
            index=models.Index(fields=['user'], name='task_reacti_user_id_27c4e7_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='taskreaction',
            unique_together={('task', 'comment', 'user', 'reaction_type')},
        ),
        migrations.AddIndex(
            model_name='timeentry',
            index=models.Index(fields=['organization', 'task'], name='time_entrie_organiz_c61368_idx'),
        ),
        migrations.AddIndex(
            model_name='timeentry',
            index=models.Index(fields=['user', 'date'], name='time_entrie_user_id_019265_idx'),
        ),
        migrations.AddIndex(
            model_name='timeentry',
            index=models.Index(fields=['is_billable'], name='time_entrie_is_bill_e8459b_idx'),
        ),
        migrations.AddIndex(
            model_name='timeentry',
            index=models.Index(fields=['-date'], name='time_entrie_date_d8f2ae_idx'),
        ),
        migrations.AddIndex(
            model_name='webhook',
            index=models.Index(fields=['organization', 'is_active'], name='webhooks_organiz_211990_idx'),
        ),
        migrations.AddIndex(
            model_name='webhook',
            index=models.Index(fields=['project'], name='webhooks_project_84d004_idx'),
        ),
        migrations.AddIndex(
            model_name='webhookdelivery',
            index=models.Index(fields=['webhook', '-created_at'], name='webhook_del_webhook_b549ed_idx'),
        ),
        migrations.AddIndex(
            model_name='webhookdelivery',
            index=models.Index(fields=['status'], name='webhook_del_status_269a2c_idx'),
        ),
        migrations.AddIndex(
            model_name='webhookdelivery',
            index=models.Index(fields=['next_retry_at'], name='webhook_del_next_re_b2acb4_idx'),
        ),
        migrations.AddIndex(
            model_name='worklog',
            index=models.Index(fields=['task', '-created_at'], name='work_logs_task_id_5940a2_idx'),
        ),
        migrations.AddIndex(
            model_name='worklog',
            index=models.Index(fields=['user'], name='work_logs_user_id_12415a_idx'),
        ),
        migrations.AddIndex(
            model_name='worklog',
            index=models.Index(fields=['log_type'], name='work_logs_log_typ_658d66_idx'),
        ),
    ]
